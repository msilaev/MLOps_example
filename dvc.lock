schema: '2.0'
stages:
  data_split:
    cmd: python src/data_split.py params.yaml
    deps:
    - path: src/data_split.py
      hash: md5
      md5: b13ba7d692462c6bc40c2fc33386624b
      size: 1251
    params:
      params.yaml:
        base.random_state: 42
        data_source.local_path: data/data.csv
        split.split_ratio: 0.2
    outs:
    - path: data/split
      hash: md5
      md5: 8244fc760f52fd595ce0116359dbd9fc.dir
      size: 66262328
      nfiles: 2
  prepare_dataset:
    cmd: python src/prepare_dataset.py params.yaml
    deps:
    - path: params.yaml
      hash: md5
      md5: 284c2b0fc11dd6bea1358fe781f4c43e
      size: 807
      isexec: true
    - path: src/prepare_dataset.py
      hash: md5
      md5: 0a88887d3b3febf519f83553d8f666cf
      size: 2574
      isexec: true
    - path: src/preprocess_data.py
      hash: md5
      md5: 46b54f3291cabd59396bd0e577cd6d95
      size: 3411
      isexec: true
    params:
      params.yaml:
        base.random_state: 43
        data_source.local_path: data/data.csv
        split.split_ratio: 0.8
    outs:
    - path: data/processed/test_data.csv
      hash: md5
      md5: fc29b7f2899a351da7de842ff868063f
      size: 865162
    - path: data/processed/total_data.csv
      hash: md5
      md5: 11dc10bce352f44212304e7b2a1bf391
      size: 8402484
    - path: data/processed/train_data.csv
      hash: md5
      md5: 923d7eb11037f3c3c8a2d3f1b3d6fef5
      size: 6688497
    - path: data/processed/val_data.csv
      hash: md5
      md5: 7c37a1007815aa4ff57ca8acf67d437f
      size: 848853
  train:
    cmd: python src/train.py params.yaml
    deps:
    - path: data/processed
      hash: md5
      md5: 30f3a4b6e1d46c125ad14809ac7e473f.dir
      size: 16804996
      nfiles: 4
    - path: src/train.py
      hash: md5
      md5: 78268a76ba7b472726709425b55cb3ad
      size: 5587
      isexec: true
    params:
      params.yaml:
        base.random_state: 43
        base.target_col: target
        train.model_dir: models
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 311d06671dc019e38cb0e0dfbaae7f86
      size: 16476715
    - path: models/vectorizer.joblib
      hash: md5
      md5: 7881ab2fb36547186f55989bff95cc64
      size: 51380588
  predict:
    cmd: python src/predict.py params.yaml
    deps:
    - path: models/model.joblib
      hash: md5
      md5: 311d06671dc019e38cb0e0dfbaae7f86
      size: 16476715
    - path: models/vectorizer.joblib
      hash: md5
      md5: 7881ab2fb36547186f55989bff95cc64
      size: 51380588
    - path: src/predict.py
      hash: md5
      md5: e35f1ecd701f8feeea9335b31cce268a
      size: 3564
      isexec: true
  evaluate:
    cmd: python src/evaluate.py params.yaml
    deps:
    - path: data/processed/test_data.csv
      hash: md5
      md5: fc29b7f2899a351da7de842ff868063f
      size: 865162
    - path: models/model.joblib
      hash: md5
      md5: 311d06671dc019e38cb0e0dfbaae7f86
      size: 16476715
    - path: models/vectorizer.joblib
      hash: md5
      md5: 7881ab2fb36547186f55989bff95cc64
      size: 51380588
    - path: params.yaml
      hash: md5
      md5: 284c2b0fc11dd6bea1358fe781f4c43e
      size: 807
      isexec: true
    - path: src/evaluate.py
      hash: md5
      md5: 32028508b523c512fe78b1f227211751
      size: 3847
      isexec: true
    outs:
    - path: eval/live/metrics.json
      hash: md5
      md5: 90337e7385b468ca6a954c70e9326851
      size: 121
    - path: eval/live/plots
      hash: md5
      md5: 928043c3ce226e4e6dca7850d0573369.dir
      size: 61342
      nfiles: 2
    - path: eval/prc
      hash: md5
      md5: 3ad52ab8384bb1b9ab3418ae98ee9234.dir
      size: 2363
      nfiles: 1
  register_model:
    cmd: python src/register_model.py params.yaml
    deps:
    - path: models/model.joblib
      hash: md5
      md5: 6a3c92662b889578f8d8eab14c6e1219
      size: 8847243
    - path: models/vectorizer.joblib
      hash: md5
      md5: 98389de4d57d7bceea46095e89ee50e6
      size: 27260164
    - path: src/register_model.py
      hash: md5
      md5: 103c6b9de5288baa9229cde257d4f2f9
      size: 2394
      isexec: true
    params:
      params.yaml:
        train.model_dir: models
        train.model_file: model.joblib
